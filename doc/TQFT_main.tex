\documentclass{ltjsreport}

%%%%%%%%%%packages%%%%%%%%%%
%% colors and links
\usepackage[svgnames]{xcolor}
\usepackage{hyperref}
\usepackage{xurl}

%% equations
%%%% math
\usepackage{amsmath,amsfonts,amssymb,amsthm}
\usepackage{mathtools}
\usepackage{mathrsfs}
\usepackage{bm}
\usepackage{cancel}
\usepackage{dsfont}
%%%% physics
\usepackage{siunitx}
\usepackage{physics}
%%%% chemistry
\usepackage[version=3]{mhchem}

%% positioning
\usepackage{array}
\usepackage{float}

%% table
\usepackage{booktabs}
\usepackage{multirow}
\usepackage{hhline}
\usepackage{subcaption}

%% figure
\usepackage{graphicx}
\usepackage{tikz}
\usetikzlibrary{
    intersections,
    decorations,
    calc,
    patterns,
    through,
    positioning,
    arrows,
    backgrounds,
    cd,
    spath3,
    3dtools,
    knots,
    celtic,
    hobby,
    shapes.misc
}
\usetikzlibrary{
    intersections,
    decorations,
    calc,
    patterns,
    through,
    positioning,
    arrows,
    backgrounds,
    cd,
    spath3,
    3d,
    knots,
    celtic,
    hobby,
    shapes.misc
}
\tikzset{%
        symbol/.style={%
        draw=none,
        every to/.append style={%
            edge node={node [sloped, allow upside down, auto=false]{$#1$}}
        }
    },
    ->-/.style={
        postaction={decorate},
        decoration={
            markings,
            mark=at position #1 with {\arrow{>}}
        }
    },
    -<-/.style={
        decoration={
            markings,
            mark=at position #1 with {\arrow{<}}
        },
        postaction={decorate}
    },
    bullet/.style={
        circle,fill,
        inner sep=2pt,
        label={#1}
    },
    vertex/.style={
        circle,fill,
        inner sep=1pt,
        label={#1}
    },
    squarednode/.style={
        rectangle, draw=black!60, minimum size=5mm
    },
    circlenode/.style={
        circle, draw=black!60, fill=white, minimum size=5mm
    },
    trinode/.style={
        regular polygon, regular polygon sides=3, minimum size=5mm
    },
    trinvnode/.style={
        regular polygon, regular polygon sides=3, shape border rotate=180, minimum size=5mm
    },
    bdymfd/.style={
        top color=red!50
    },
    process/.style={
        shape=rectangle, rounded corners, align=center, draw=#1, double
    },
    pullback/.style={
        minimum size=1.2ex,path picture={
            \draw[opacity=1,black,-,#1] (-0.5ex,-0.5ex) -- (0.5ex,-0.5ex) -- (0.5ex,0.5ex);%
        }
    },
    cross/.style={
        cross out, draw, thin,
        minimum size=2*(#1-\pgflinewidth), 
        inner sep=0pt, outer sep=0pt
    },
    cross/.default={1pt},
    band/.style={
        double=white,double distance=5pt
    },
    core/.style={
        blue,thick
    },
    overcrossing/.style n args={2}{
        white,very thick,double={#1},double distance={#2}
    },
    overcrossing/.default={black}{.4pt},
    show curve controls/.style={
        decorate,
        decoration={
            show path construction,
            curveto code={
                \draw [blue, dashed]
                (\tikzinputsegmentfirst)    -- (\tikzinputsegmentsupporta)
                node [at end, cross out, draw, solid, red, inner sep=2pt]{};
                \draw [blue, dashed]
                (\tikzinputsegmentsupportb) -- (\tikzinputsegmentlast)
                node [at start, cross out, draw, solid, red, inner sep=2pt]{};
            }
        }
    }
    show coord name/.style={
        append after command={
        \pgfextra
            \node[font=\ttfamily\scriptsize, above] at (\tikzlastnode) {\tikzlastnode};
        \endpgfextra
        }
    },
    middash/.style n args={2}{
        postaction={
            decorate,
            decoration={
                markings,
                mark=between positions #1 and #2 step .02 with {
                    \fill[white] (0,0) circle ({.006*\pgfdecoratedpathlength});
                }
            }
        }
    },
    sqvtx/.style = {
        rectangle, fill=white, draw=black!60, minimum size=1pt
    },
    circvtx/.style = {
        circle, fill=white, draw=black!60, minimum size=1pt
    }
}

\usepackage{tikz-feynman}
\usepackage{tikz-network}
\usepackage{pgfplots}
\usepgfplotslibrary{patchplots}
\pgfplotsset{compat=1.15}

\pgfdeclarelayer{background}
\pgfdeclarelayer{foreground}
\pgfsetlayers{background,main,foreground}

%% decorations
\usepackage{titlesec}
\usepackage{picture}

%% framing
\usepackage{fancybox}
\usepackage{boites}
\usepackage{tcolorbox}
\tcbuselibrary{skins,theorems,breakable}

%% citation
\usepackage{cite}

%% miscellaneous
%%%% comment
\usepackage{comment}
%%%% Japanese
\usepackage{ascmac}
\usepackage{listings} %日本語のコメントアウトをする場合jlisting（もしくはjvlisting）が必要
\lstset{
    basicstyle={\ttfamily},
    identifierstyle={\small},
    commentstyle={\smallitshape},
    keywordstyle={\small\bfseries},
    ndkeywordstyle={\small},
    stringstyle={\small	tfamily},
    frame={tb},
    breaklines=true,
    columns=[l]{fullflexible},
    numbers=left,
    xrightmargin=0pt,
    xleftmargin=27pt,
    numberstyle={\scriptsize},
    stepnumber=1,
    lineskip=-0.5ex
}

%%macros
\usepackage{mylogics}
\usepackage{myalgebra}
\usepackage{mygeometry}
\usepackage{myQM}
\usepackage{mymonoidalcat}

%%%%%%%%%%optional settings%%%%%%%%%%
\usepackage{contour}
\contourlength{0.5pt}   % 縁取りの太さ

%%%%%hyperref%%%%%
\hypersetup{
    colorlinks,citecolor=DarkGreen,linkcolor=DeepPink,linktocpage,unicode,
    pdfauthor={Toshinori Takama},
    pdftitle={A note on TQFT}
}

%%%%%図表並列%%%%%
\makeatletter
\newcommand{\figcaption}[1]{\def\@captype{figure}\caption{#1}}
\newcommand{\tblcaption}[1]{\def\@captype{table}\caption{#1}}
\makeatother

%%%%%itemization%%%%%
\renewcommand{\labelenumi}{\theenumi}
\renewcommand{\theenumi}{(\arabic{enumi})} % 箇条書きをローマ数字に

%%%%%%theorem environments%%%%%
\newtheoremstyle{mystyle}%   % スタイル名
    {}%                      % 上部スペース
    {}%                      % 下部スペース
    {\normalfont}%          % 本文フォント
    {}%                      % インデント量
    {\bf}%                  % 見出しフォント
    {.}%                      % 見出し後の句読点
    {\newline}%                     % 見出し後のスペース
    {\underline{\thmname{#1}\thmnumber{#2}\thmnote{（#3）}}}%
    % 見出しの書式 (can be left empty, meaning `normal')
\theoremstyle{mystyle} % スタイルの適用

\newtheorem{theorem}{定理}[section]
\newtheorem{definition}{定義}[section]
\newtheorem{proposition}[definition]{命題}
\newtheorem{corollary}[theorem]{系}
\renewcommand{\proofname}{証明}

%proof
\makeatletter % use at mark
\renewcommand{\qedsymbol}{$\blacksquare$}
\renewenvironment{proof}[1][\proofname]{\par
    \pushQED{\qed}%
    \normalfont \topsep6\p@\@plus6\p@\relax
    \trivlist
    \item[\hskip\labelsep
        \itshape
    \textbf{\underline{#1}}]\ignorespaces
    % {\bf\underline{#1}\@addpunct{.}}]\ignorespaces % ピリオドあり
}{%
    \popQED\endtrivlist\@endpefalse
}
\makeatother % end at mark

%%%%%%mathtools%%%%%
\allowdisplaybreaks % align pagebreak
\mathtoolsset{showonlyrefs=true} % 被参照数式のみ数式番号割り振り
\numberwithin{equation}{section}

\makeatletter
\@addtoreset{equation}{section}
\makeatother

%%%%%%framing%%%%%
\newtcolorbox[auto counter,number within=chapter]{myaxiom}[2][breakable]{%
colback=red!5!white,colframe=red!75!black,fonttitle=\bfseries,
title=公理~\thetcbcounter: #2,#1}

\newtcolorbox[auto counter,number within=chapter]{myaxiomph}[2][breakable]{%
colback=red!5!white,colframe=red!75!black,fonttitle=\bfseries,
title=公理${}^{\text{ph}}$~\thetcbcounter: #2,#1}

\newtcolorbox[auto counter,number within=chapter]{myassump}[2][breakable]{%
colback=red!5!white,colframe=red!75!black,fonttitle=\bfseries,
title=仮定~\thetcbcounter: #2,#1}

\newtcolorbox[auto counter,number within=chapter]{myassumpph}[2][breakable]{%
colback=red!5!white,colframe=red!75!black,fonttitle=\bfseries,
title=仮定${}^{\text{ph}}$~\thetcbcounter: #2,#1}

\newtcolorbox[auto counter,number within=chapter]{mytheo}[2][breakable]{%
colback=blue!5!white,colframe=blue!75!black,fonttitle=\bfseries,
title=定理~\thetcbcounter: #2,#1}

\newtcolorbox[auto counter,number within=chapter]{mytheoph}[2][breakable]{%
colback=blue!5!white,colframe=blue!75!black,fonttitle=\bfseries,
title=定理${}^{\text{ph}}$~\thetcbcounter: #2,#1}

\newtcolorbox[auto counter,number within=chapter]{myprop}[2][breakable]{%
colback=blue!5!white,colframe=blue!75!black,fonttitle=\bfseries,
title=命題~\thetcbcounter: #2,#1}

\newtcolorbox[auto counter,number within=chapter]{mypropph}[2][breakable]{%
colback=blue!5!white,colframe=blue!75!black,fonttitle=\bfseries,
title=命題${}^{\text{ph}}$~\thetcbcounter: #2,#1}

\newtcolorbox[auto counter,number within=chapter]{mylem}[2][breakable]{%
colback=blue!5!white,colframe=blue!75!black,fonttitle=\bfseries,
title=補題~\thetcbcounter: #2,#1}

\newtcolorbox[auto counter,number within=chapter]{mydef}[2][breakable]{%
colback=green!5!white,colframe=green!75!black,fonttitle=\bfseries,
title=定義~\thetcbcounter: #2,#1}

\newtcolorbox[auto counter,number within=chapter]{mydefph}[2][breakable]{%
colback=green!5!white,colframe=green!75!black,fonttitle=\bfseries,
title=定義${}^{\text{ph}}$~\thetcbcounter: #2,#1}

\newtcolorbox[auto counter,number within=chapter]{myhypo}[2][breakable]{%
colback=LightSkyBlue!5!white,colframe=Cyan!75!black,fonttitle=\bfseries,
title=仮説~\thetcbcounter: #2,#1}

\newtcolorbox[auto counter,number within=chapter]{myhypoph}[2][breakable]{%
colback=LightSkyBlue!5!white,colframe=Cyan!75!black,fonttitle=\bfseries,
title=仮説${}^{\text{ph}}$~\thetcbcounter: #2,#1}

\newtcolorbox[auto counter,number within=chapter]{myconj}[2][breakable]{%
colback=LightSkyBlue!5!white,colframe=Crimson!75!black,fonttitle=\bfseries,
title=予想~\thetcbcounter: #2,#1}

\newtcolorbox[auto counter,number within=chapter]{myconjph}[2][breakable]{%
colback=LightSkyBlue!5!white,colframe=Crimson!75!black,fonttitle=\bfseries,
title=予想${}^{\text{ph}}$~\thetcbcounter: #2,#1}

\newtcolorbox[use counter from=mytheo]{mycol}[2][breakable]{%
fonttitle=\bfseries,enhanced,
attach boxed title to top left=
{xshift=-2mm,yshift=-2mm},
title=系~\thetcbcounter: #2,#1}

\newtcolorbox{marker}[1][breakable]{enhanced,
  	before skip=2mm,after skip=3mm,
  	boxrule=0.4pt,left=5mm,right=2mm,top=1mm,bottom=1mm,
  	colback=yellow!50,
  	colframe=yellow!20!black,
  	sharp corners,rounded corners=southeast,arc is angular,arc=3mm,
  	underlay={%
  	  	\path[fill=tcbcolback!80!black] ([yshift=3mm]interior.south east)--++(-0.4,-0.1)--++(0.1,-0.2);
  	  	\path[draw=tcbcolframe,shorten <=-0.05mm,shorten >=-0.05mm] ([yshift=3mm]interior.south east)--++(-0.4,-0.1)--++(0.1,-0.2);
  	  	\path[fill=yellow!50!black,draw=none] (interior.south west) rectangle node[white]{\Huge\bfseries !} ([xshift=4mm]interior.north west);
  	  	},
  	drop fuzzy shadow,#1}

% example
\newtcolorbox[auto counter, number within=section]{myexample}[2][]{
    breakable,
    empty,
    outer arc=0pt,
    arc=0pt,
    attach boxed title to top left,
    boxed title style={
        empty,
        left=-2mm,
        right=-2mm
    },
    coltitle=black,
    colframe=black,
    colback=white,
    fonttitle=\bfseries,
    title=【例~\thetcbcounter】#2,#1,
}
\newcommand{\exref}[1]{\textbf{【例\ref{#1}】}}


%%%%%title decorations%%%%%

% section
\titleformat{\section}[block]
{}{}{0pt}
{
    \colorbox{blue}{\begin{picture}(0,10)\end{picture}}
    \hspace{0pt}
    \normalfont \Large\bfseries \thesection
    \hspace{0.5em}
}
[
\begin{picture}(100,0)
    \put(3,18){\color{blue}\line(1,0){300}}
\end{picture}
\\
\vspace{-30pt}
]

% subsection
\titleformat{\subsection}[block]
{}{}{0pt}
{
    \normalfont \large\bfseries \thesubsection
    \hspace{0.5em}
}
[
\begin{picture}(100,0)
    \put(3,15){\color{black}\line(1,0){200}}
\end{picture}
\\
\vspace{-25pt}
]

%%%%%%%%%%macros%%%%%%%%%%

% \makeatletter
% \newcommand{\extp}{\@ifnextchar^\@extp{\@extp^{\,}}}
% \def\@extp^#1{\mathop{\bigwedge\nolimits^{\!#1}}}
% \makeatother

% \newcommand{\vecfield}[1]{\mathfrak{X}(#1)}
% \newcommand{\cinfty}{$C^\infty$}
% \newcommand{\cinftyf}[1]{C^\infty(#1)}
% \newcommand{\edlogic}{$\varepsilon$-$\delta$}
% \newcommand{\phase}[1]{(#1,\, \mathscr{O}_{#1})}

% % long zigzag arrow
% \usepackage[cmtip,all]{xy}
% \newcommand{\longsquiggly}{\xymatrix{{}\ar@{~>}[r]&{}}}

\mathchardef\mhyphen="2D
\newcommand{\cinfty}{$C^\infty$}
\newcommand{\lrto}{\longleftarrow}
\newcommand{\lto}{\longrightarrow}
\newcommand{\lmto}{\longmapsto}
\newcommand{\codd}[1]{\mathrm{D}#1}
\newcommand{\mfdcal}[2]{\mathcal{#1}^{(#2)}}
\newcommand{\mfd}[2]{#1^{(#2)}}
\newcommand{\mfdrm}[2]{\mathrm{#1}^{(#2)}}
\newcommand{\cmfd}[1]{\mathcal{C}^{(#1)}}
\newcommand{\boxdiagram}[1]{
    \tcboxmath[colback=white, colframe=black, arc=0pt, boxrule=0.8pt]{
        \begin{tikzcd}[row sep=large, column sep=large, ampersand replacement=\&]
            #1
        \end{tikzcd}
    }
}

\newcommand{\btl}{\blacktriangleleft}
\newcommand{\btr}{\blacktriangleright}
\newcommand{\fk}{\mathbb{K}}
\newcommand{\Lie}[1]{#1^{\mathrm{L}}}
\newcommand{\evalunit}{\mathrm{ev}_{1_G}}
\newcommand{\hg}[2]{#1^{(#2)}}
\newcommand{\Lat}[1]{\mathrm{Lat}\left(#1\right)}
\newcommand{\Gnd}[1]{\mathrm{Gnd}\left(#1\right)}
\newcommand{\LatG}[2]{\mathrm{Lat}_{#1}\left(#2\right)}
% \newcommand{\LatG}[2]{\mathrm{Lat}_{#1}\left(#2\right)}
\newcommand{\Mul}[1]{\mathrm{Mul}_{#1}}

% \DeclareMathOperator{\depth}{depth}
% \DeclareMathOperator{\Basis}{Basis}
%% Yoneda embedding
\usepackage[utf8]{inputenc}
\DeclareFontFamily{U}{min}{}
\DeclareFontShape{U}{min}{m}{n}{<-> udmj30}{}
\newcommand\yo{\!\text{\usefont{U}{min}{m}{n}\symbol{'207}}\!}

%% TikZ commands
\usepackage{mytikz}

\newcommand{\mathimg}[2][1.6ex]{%
  \vcenter{\hbox{\includegraphics[height=#1]{#2}}}%
}


\DeclareMathOperator{\type}{type}
\usepackage{scalerel}

\usepackage{xparse}

% \ketHuge{<content>} : content の全高に合わせて右の \rangle を縦ストレッチ
% 微調整したいときは \ketHuge[<raise>]{...} で rangle だけ上下に動かせます（例: -0.15ex）
\NewDocumentCommand{\ketHuge}{O{0pt}m}{%
  \begingroup
  % 中身を数学軸に中心合わせした箱として測る
  \setbox0=\hbox{\ensuremath{\vcenter{\hbox{#2}}}}%
  \dimen0=\dimexpr\ht0+\dp0\relax
  \mathopen{}\left\lvert \box0 \right.\mathclose{%
    \raisebox{#1}{\ensuremath{\vcenter{\hbox{\stretchto{>}{\dimen0}}}}}%
  }%
  \endgroup
}

\NewDocumentCommand{\braHuge}{O{0pt}m}{%
  \begingroup
  % 中身を数学軸に中心合わせした箱として測る
  \setbox0=\hbox{\ensuremath{\vcenter{\hbox{#2}}}}%
  \dimen0=\dimexpr\ht0+\dp0\relax
  \mathopen{}\left.\mathclose{%
    \raisebox{#1}{\ensuremath{\vcenter{\hbox{\stretchto{<}{\dimen0}}}}}%
  }%
  \box0 \right\rvert
  \endgroup
}
% \newcommand{\Ellipse}[3]{
% 	\draw[thick] #1 arc(-180:0:{#2} and {#3});
% 	\draw[thick] ($ #1 + 2*(#2,0)$) arc(0:180:{#2} and {#3});
% }

% \newcommand{\halfDottedEllipse}[3]{
% 	\draw[thick] #1 arc(-180:0:{#2} and {#3});
% 	\draw[thick, dotted] ($ #1 + 2*(#2,0)$) arc(0:180:{#2} and {#3});
% }

\newcommand{\dyn}[1]{
    #1_{\text{dyn}}
}

\newcommand{\topo}[1]{
    #1_{\text{top}}
}

% \newcommand{\Interval}[3]{
%     \path (#1,0) node[#3] {$($} -- +(#2,0) node[#3] {$)$};
% }

%% file division
\usepackage{subfiles}

%% indicate labels
% \usepackage{showlabels}

\begin{document}

\title{位相的場の理論 ノート}
\author{高間俊至}
\date{最終更新：\today}
\maketitle

\section*{前書き}

% 本資料は，ゲージ理論・位相的場の理論 (Topological Quantum Field Theory; TQFT) ・トポロジカル相に関連する物理学・数学の勉強ノートである．
% 物理学徒の視点から見た際に，数学的にある程度自己完結した内容にしようと試みた結果，かなり数学色の強い内容となっている．
% できるだけ正確な記述を試みているが，筆者本人は大学院修士課程の学生であるため

本資料の最新版 \LaTeX ソースコードはgithubリポジトリ \url{https://github.com/T2sp/TQFT} から入手できます．\today 現在ではかなり頻繁に更新しているため，最終更新日に注意してください．
内容に誤りや誤植などを発見した場合は該当リポジトリの \href{https://github.com/T2sp/TQFT/issues}{\textbf{\textsf{Issues}}} にて報告していただけますと大変助かります．

\section*{記号}

\begin{mydefph}[]{}
    
\end{mydefph}

\begin{myconjph}[]{}
    
\end{myconjph}

\begin{mypropph}[]{}
    
\end{mypropph}

など，囲み枠の見出しの肩に ${}^{\text{ph}}$ が付いているものは，物理学的に妥当だと考えられているが数学的に厳密な定式化・証明が完了していない主張である．

\setcounter{tocdepth}{2}
\tableofcontents

\subfile{chap1}

\subfile{chap2}

\subfile{chap3}

\subfile{chap4}

% \subfile{chap5}

% \subfile{chap6}

% \subfile{chap7}

% \subfile{chap8}

% \subfile{chap9}

% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% Appendix %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\appendix

\subfile{appendixA}

\subfile{appendixB}

\subfile{appendixC}

\subfile{appendixD}

\subfile{appendixE}

\subfile{appendixF}

\subfile{appendixG}

%参考文献のスタイル（style.bstを参照）
\bibliographystyle{myjalpha}
%参考文献（reference.bibを参照）
\bibliography{TQFTrefs}

\end{document}
